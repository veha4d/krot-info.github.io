Komento.module("komento.profile",function(e){var t=this;Komento.require().script("komento.common").done(function(){Komento.Controller("Profile",{defaults:{uid:0,"{navActivities}":".navActivities","{navPopular}":".navPopular","{navSticked}":".navSticked","{navs}":".navs","{tabs}":".tabs","{activitiesTab}":"#kmt-activities","{popularTab}":"#kmt-popular","{stickedTab}":"#kmt-sticked","{loadMore}":".loadMore"}},function(t){return{init:function(){t.navs(":eq(0)").trigger("click"),t.loaded={},t.total={}},"{navs} click":function(n){var r=e(n).attr("func"),i=e(n).attr("tab");t.tabs().hide(),e("#"+i).show(),t.navs().removeClass("active"),n.addClass("active"),t[r]&&t[r]()},"{loadMore} click":function(e){if(e.checkClick()){var n=e.parents(".tabs").attr("id").substring(4),r="loadMore"+n.charAt(0).toUpperCase()+n.slice(1);t[r]()}},loadActivities:function(){t.activitiesTab().attr("loaded")||(t.activitiesTab().html('<img src="'+Komento.options.spinner+'" />'+e.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getactivities",{uid:t.options.uid},{success:function(e,n,r){t.activitiesTab().html(e),t.activitiesTab().attr("loaded",!0),t.loaded.activities=parseInt(n),t.total.activities=parseInt(r)},fail:function(){}}))},loadMoreActivities:function(){Komento.ajax("site.views.profile.getactivities",{loadMore:1,uid:t.options.uid,start:t.loaded.activities},{success:function(e,n,r){t.activitiesTab().children("ul").append(e),t.loaded.activities+=parseInt(n),t.loaded.activities>=t.total.activities&&t.hideLoadMore("activities"),t.loadMore().enable()},fail:function(){}})},loadPopular:function(){t.popularTab().attr("loaded")||(t.popularTab().html('<img src="'+Komento.options.spinner+'" />'+e.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getpopularcomments",{uid:t.options.uid},{success:function(e,n,r){t.popularTab().html(e),t.popularTab().attr("loaded",!0),t.loaded.popular=parseInt(n),t.total.popular=parseInt(r)},fail:function(){}}))},loadMorePopular:function(){Komento.ajax("site.views.profile.getpopularcomments",{loadMore:1,uid:t.options.uid,start:t.loaded.popular},{success:function(e,n,r){t.popularTab().children("ul").append(e),t.loaded.popular+=parseInt(n),t.loaded.popular>=t.total.popular&&t.hideLoadMore("popular"),t.loadMore().enable()},fail:function(){}})},loadSticked:function(){t.stickedTab().attr("loaded")||(t.stickedTab().html('<img src="'+Komento.options.spinner+'" />'+e.language("COM_KOMENTO_LOADING")),Komento.ajax("site.views.profile.getstickedcomments",{uid:t.options.uid},{success:function(e,n,r){t.stickedTab().html(e),t.stickedTab().attr("loaded",!0),t.loaded.sticked=parseInt(n),t.total.sticked=parseInt(r)},fail:function(){}}))},loadMoreSticked:function(){Komento.ajax("site.views.profile.getstickedcomments",{loadMore:1,uid:t.options.uid,start:t.loaded.sticked},{success:function(e,n,r){t.stickedTab().children("ul").append(e),t.loaded.sticked+=parseInt(n),t.loaded.sticked>=t.total.sticked&&t.hideLoadMore("sticked"),t.loadMore().enable()},fail:function(){}})},hideLoadMore:function(t){e("#kmt-"+t).find(".loadMore").remove()}}}),t.resolve()})});