Komento.module("komento.insertvideo",function(e){var t=this;Komento.Controller("InsertVideo",{defaults:{caretPosition:"",element:"","{videoUrl}":".videoUrl","{insertVideo}":".insertVideo","{cancelVideo}":".cancelVideo"}},function(t){return{init:function(){},"{insertVideo} click":function(){t.addVideoLink()},"{cancelVideo} click":function(){t.closeDialog()},"{videoUrl} keypress":function(e,n){n.keyCode==13&&(n.preventDefault(),t.addVideoLink())},addVideoLink:function(){var n=t.videoUrl().val();if(n==="")return;var r=e("#"+t.options.element),i="[video]"+n+"[/video]",s=r.val();if(t.options.caretPosition==0)return r.val(i+s),e(".commentInput").focus(),e(".commentForm").controller().commentLengthCheck(),t.closeDialog(),!0;var s=r.val();r.val(s.substring(0,t.options.caretPosition)+i+s.substring(t.options.caretPosition,s.length)),e(".commentInput").focus(),e(".commentForm").controller().commentLengthCheck(),t.closeDialog()},closeDialog:function(){e(".foundryDialog").controller().close()}}}),t.resolve()});